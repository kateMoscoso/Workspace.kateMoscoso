<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
 <head>
 <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"> 
 <title>getJSON</title>
  <script type="text/javascript" src="../jquery.js"></script>    
  <style type="text/css">
    body { font-family: Verdana, sans-serif; }
    h1, h2 { text-align:center; }
    ul { padding-left:300px; }
    li {color:red}
    a {text-decoration:none}
    .impar {color:green}                
  </style>  
 <script type="text/javascript">
 <!--
 $(document).ready(function (){
 
 function Llama(dato){
    var cadena="<table border='1'>";
    $.getJSON('JSONbuscaempleados.php', "tipo="+dato, function(retorno){                    
       $.each(retorno, function (indice, valor){
          cadena += "<tr><td>"+this['CodE']+'</td><td>'+this['Nombre']+"</td>";
          cadena += "<td>"+this['Sueldo']+'</td><td>'+this['Categoria']+"</td></tr>";
          }); //del each   
       }); //del getJSON                                 
    cadena += '</table>';
   // alert (cadena);    
    return cadena;
    }
          
    $('#D01').click( function (){
                     var cadena="<table border='1'>";
                     $.getJSON('JSONbuscaempleados.php', "tipo=D01", function(retorno){                    
                          $.each(retorno, function (indice, valor){
                              cadena += "<tr><td>"+this['CodE']+'</td><td>'+this['Nombre']+"</td>";
                              cadena += "<td>"+this['Sueldo']+'</td><td>'+this['Categoria']+"</td></tr>";
                              });                              
                           cadena += '</table>';
                           $('#empsc').html(cadena);
                           });
                     });                   
    $('#D02').click( function (){
                     var texto = Llama("D02");
                   //  alert (texto);
                     $('#empinv').html(texto);
                     });                                          
    $('#D03').click( function (){
                     $.getJSON('JSONbuscaempleados.php', "tipo=D03", function(){
                       }); 
                     });
                     
                                        
		});   
 //-->
 </script>
 </head>
 
 <body>
  <hr />
  <h2>Búsqueda de empleados con "getJSON"</h2>
  <hr />  
  <h2 id='titulo'>Departamentos</h2>
  <hr /><br />      
  <ul>
    <li class='impar' id='D01'>Servicios Centrales<br/>
       <div id='empsc'></div>
    </li>
    <li class='par' id='D02'>Investigación<br/>
       <div id='empinv'></div>
    </li>
    <li class='impar' id='D03'>Marketing<br/>
       <div id='empventas'></div>
    </li>
  </ul>          
  <br /><br />
  <hr /><br /><br />
 </body>
</html>
